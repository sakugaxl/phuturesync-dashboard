import{j as e}from"./index-g5cVkZII.js";import{r as n}from"./react-vendor-D6gW23l2.js";import{D as d}from"./DashboardCard-B7kqJ_7D.js";import{R as u,L as y,C as b,X as N,Y as v,T as g,b as w,c as o,P as R,d as S,e as k}from"./chart-vendor-D8Iq3d2I.js";import{b as C}from"./api-DUtXSIdq.js";import{D,g as F,T as L,A as P}from"./icon-vendor-CjJADx1M.js";const E=[{label:"Daily",value:"daily"},{label:"Weekly",value:"weekly"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"}];function T({timeframe:a,setTimeframe:s,customTimeframes:r=E}){return e.jsx("div",{className:"flex space-x-2",children:r.map(({label:c,value:i})=>e.jsx("button",{onClick:()=>s(i),className:`px-4 py-2 rounded-lg transition-colors focus:ring-2 focus:ring-blue-500 focus:outline-none ${a===i?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,"aria-pressed":a===i,children:c},i))})}function $({data:a}){return e.jsx(u,{width:"100%",height:400,children:e.jsxs(y,{data:a,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"date"}),e.jsx(v,{}),e.jsx(g,{formatter:s=>`R ${s.toLocaleString()}`,contentStyle:{backgroundColor:"white",borderRadius:"8px"}}),e.jsx(w,{}),e.jsx(o,{type:"monotone",dataKey:"income",name:"Income",stroke:"#10B981",strokeWidth:2,dot:!1}),e.jsx(o,{type:"monotone",dataKey:"expenses",name:"Expenses",stroke:"#EF4444",strokeWidth:2,dot:!1}),e.jsx(o,{type:"monotone",dataKey:"profit",name:"Profit",stroke:"#3B82F6",strokeWidth:2,dot:!1})]})})}function A({data:a}){return e.jsxs("div",{className:"h-[300px]",children:[e.jsx(u,{width:"100%",height:"100%",children:e.jsxs(R,{children:[e.jsx(S,{data:a,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:a.map((s,r)=>e.jsx(k,{fill:s.color},`cell-${r}`))}),e.jsx(g,{formatter:s=>`R ${s.toLocaleString()}`,contentStyle:{backgroundColor:"white",borderRadius:"8px"}})]})}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-2",children:a.map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:s.color}}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.name,": R ",s.value.toLocaleString()]})]},s.name))})]})}function X(){const[a,s]=n.useState("monthly"),[r,c]=n.useState([]),[i,j]=n.useState([]),[f,x]=n.useState(!0),[m,h]=n.useState(null);return n.useEffect(()=>{(async()=>{try{x(!0);const{financial:l,expenses:p}=await C(a);c(l),j(p),h(null)}catch(l){console.error("Failed to fetch financial data:",l),h("Unable to load financial data. Please try again later.")}finally{x(!1)}})()},[a]),f?e.jsx("p",{className:"text-center text-gray-500",children:"Loading financial data..."}):m?e.jsx("div",{className:"text-center text-red-600",children:e.jsx("p",{children:m})}):e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Financial Overview"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track your business finances and expenses"})]}),e.jsx(T,{timeframe:a,setTimeframe:s})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx(d,{title:"Monthly Revenue",value:`R ${r.reduce((t,l)=>t+l.income,0).toLocaleString()}`,icon:e.jsx(D,{className:"text-green-500"}),trend:{value:12.5,isPositive:!0}}),e.jsx(d,{title:"Monthly Expenses",value:`R ${r.reduce((t,l)=>t+l.expenses,0).toLocaleString()}`,icon:e.jsx(F,{className:"text-red-500"}),trend:{value:3.2,isPositive:!1}}),e.jsx(d,{title:"Net Profit",value:`R ${r.reduce((t,l)=>t+l.profit,0).toLocaleString()}`,icon:e.jsx(L,{className:"text-blue-500"}),trend:{value:15.8,isPositive:!0}})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Performance"}),e.jsxs("button",{className:"flex items-center text-blue-600 hover:text-blue-700",children:[e.jsx("span",{className:"text-sm",children:"Detailed Report"}),e.jsx(P,{size:16,className:"ml-1"})]})]}),e.jsx($,{data:r})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Expense Breakdown"}),e.jsx(A,{data:i})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Transactions"}),e.jsx("div",{className:"space-y-4",children:r.slice(-3).map((t,l)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["Transaction ",l+1]}),e.jsx("p",{className:"text-sm text-gray-500",children:t.date})]}),e.jsxs("span",{className:"text-red-600",children:["- R ",t.expenses.toLocaleString()]})]},l))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Budget Status"}),e.jsx("div",{className:"space-y-4",children:i.map(t=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:t.name}),e.jsx("span",{className:"text-sm text-gray-600",children:"75%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"75%"}})})]},t.name))})]})]})]})}export{X as default};
