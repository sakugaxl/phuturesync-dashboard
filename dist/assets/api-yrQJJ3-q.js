const i="https://api.phuturesync.co.za";class o{baseUrl;constructor(){this.baseUrl=i}async fetchWithAuth(t,a={}){const e=`${this.baseUrl}${t}`,c={"Content-Type":"application/json",...a.headers};try{const r=await fetch(e,{...a,headers:c,credentials:"include"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return r}catch(r){throw console.error("API request failed:",r),r}}async fetchFinancialData(t){try{const e=await(await this.fetchWithAuth(`/financial?timeframe=${t}`)).json();return{financial:e.financial,expenses:e.expenses}}catch(a){throw console.error("Error fetching financial data:",a),new Error("Failed to fetch financial data")}}async getAnalytics(){try{return await(await this.fetchWithAuth("/analytics")).json()}catch(t){throw console.error("Error fetching analytics:",t),new Error("Failed to fetch analytics data")}}async getCampaigns(){try{return await(await this.fetchWithAuth("/campaigns")).json()}catch(t){throw console.error("Error fetching campaigns:",t),new Error("Failed to fetch campaigns")}}async getSocialInsights(){try{const a=await(await this.fetchWithAuth("/auth/instagram/insights?metric=impressions,reach,profile_views&period=day&metric_type=total_value")).json();return{impressions:a.data.find(e=>e.name==="impressions")?.total_value?.value||0,reach:a.data.find(e=>e.name==="reach")?.total_value?.value||0,profile_views:a.data.find(e=>e.name==="profile_views")?.total_value?.value||0}}catch(t){throw console.error("Error fetching social insights:",t),new Error("Failed to fetch social insights")}}async fetchMarketingData(t){try{return await(await this.fetchWithAuth(`/marketing?timeframe=${t}`)).json()}catch(a){throw console.error("Error fetching marketing data:",a),new Error("Failed to fetch marketing data")}}async fetchInsightsData(){try{return await(await this.fetchWithAuth("/insights")).json()}catch(t){throw console.error("Error fetching insights data:",t),new Error("Failed to fetch insights data")}}}const n=new o,h=async()=>await n.getAnalytics(),l=async s=>await n.fetchFinancialData(s),f=async s=>await n.fetchMarketingData(s),d=async()=>await n.fetchInsightsData();console.log("API Base URL:",i);export{n as a,l as b,f as c,d,h as f};
