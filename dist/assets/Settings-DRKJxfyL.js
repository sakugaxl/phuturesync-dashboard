import{a as u,d as m,g as f,j as e,r as j,s as N,u as v,b as w,c as h,e as g,F as p,f as S}from"./index-CGOIp4Wj.js";import{r as d,R as C}from"./react-vendor-D6gW23l2.js";import{s as k,t as F,u as E,v as R,l as I,w as D,a as U,x as A,y as T}from"./icon-vendor-CdXh36rV.js";function $(){const[s,i]=d.useState({companyName:"",industry:"",regNumber:"",vatNumber:"",address:"",email:"",phone:"",website:""}),[o,b]=d.useState(null);d.useEffect(()=>{const r=u.currentUser?.uid;if(r){const t=m(g,"users",r);f(t).then(a=>{if(a.exists()){const n=a.data();console.log(n),i(n)}}).catch(a=>{console.error("Error getting document:",a)})}},[]),d.useEffect(()=>{const r=localStorage.getItem("formData");r&&i(JSON.parse(r))},[]);const c=r=>{const{id:t,value:a}=r.target;i(n=>({...n,[t]:a})),localStorage.setItem("formData",JSON.stringify({...prev,[t]:a}))},l=async r=>{if(r.preventDefault(),localStorage.setItem("formData",JSON.stringify(s)),o){const t=j(N,`logos/${o.name}`),a=v(t,o);a.on("state_changed",n=>{},n=>{console.error("Error uploading logo:",n),alert("Error uploading logo")},async()=>{const n=await w(a.snapshot.ref),x=u.currentUser?.uid;if(x)try{await h(m(g,"users",x),{...s,logoURL:n}),alert("Data saved successfully")}catch(y){console.error("Error saving data to Firestore:",y),alert("Error saving data")}})}else{const t=u.currentUser?.uid;if(t)try{await h(m(g,"users",t),s),alert("Data saved successfully")}catch(a){console.error("Error saving data to Firestore:",a),alert("Error saving data")}}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Company Profile"}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center w-32 h-32 bg-gray-100 rounded-lg mb-4 relative group cursor-pointer",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 rounded-lg transition-all flex items-center justify-center",children:e.jsx(k,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),e.jsx("span",{className:"text-gray-400",children:"Logo"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Upload your company logo"})]}),e.jsxs("form",{className:"space-y-6",onSubmit:l,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),e.jsx("input",{type:"text",id:"companyName",value:s.companyName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter company name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"industry",className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry"}),e.jsxs("select",{id:"industry",value:s.industry,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select industry"}),e.jsx("option",{value:"retail",children:"Retail"}),e.jsx("option",{value:"technology",children:"Technology"}),e.jsx("option",{value:"manufacturing",children:"Manufacturing"}),e.jsx("option",{value:"services",children:"Services"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"regNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Number"}),e.jsx("input",{type:"text",id:"regNumber",value:s.regNumber,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter registration number"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vatNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"VAT Number (Optional)"}),e.jsx("input",{type:"text",id:"vatNumber",value:s.vatNumber,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter VAT number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Address"}),e.jsx("textarea",{id:"address",rows:3,value:s.address,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter business address"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",value:s.email,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phone",value:s.phone,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter phone number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),e.jsx("input",{type:"url",id:"website",value:s.website,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter website URL"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:ring-2 focus:ring-blue-500",children:"Save Changes"})})]})]})}const L=[{name:"Facebook",icon:I,color:"blue",connectUrl:"http://localhost:5000/auth/facebook"},{name:"Google AdSense",icon:D,color:"blue",connectUrl:"http://localhost:5000/auth/googleAdsense"}],P={connected:"text-green-600","not-connected":"text-red-600"};function O(){const[s,i]=d.useState({facebook:"not-connected",googleAdsense:"not-connected"}),o=u.currentUser,b=async()=>{if(o){const l=m(g,"users",o.uid),r=await f(l);if(r.exists()){const t=r.data();i(t?.integrations||{})}}},c=async l=>{if(l==="facebook"){const r=new p;try{const t=await S(u,r);if(p.credentialFromResult(t)?.accessToken&&o){alert("Facebook connected successfully!");const n=m(g,"users",o.uid);await h(n,{integrations:{...s,[l]:"connected"}},{merge:!0});const x={...s,[l]:"connected"};i(x)}}catch(t){alert(`Error connecting to ${l}: ${t.message}`)}}};return d.useEffect(()=>{b()},[]),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Integrations"}),e.jsx("div",{className:"grid gap-4",children:L.map(({name:l,icon:r,color:t})=>{const a=l.toLowerCase().replace(" ",""),n=s[a]==="connected";return e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(r,{className:`h-5 w-5 mr-3 text-${t}-500`}),e.jsx("span",{className:"font-medium text-gray-900",children:l})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`flex items-center mr-4 text-sm ${P[n?"connected":"not-connected"]}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-4 w-4 mr-1"}),"Connected"]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 mr-1"}),"Not Connected"]})}),!n&&e.jsx("button",{onClick:()=>c(a),className:`bg-${t}-500 text-white px-4 py-2 rounded-lg hover:bg-${t}-600 transition-colors`,children:"Connect"}),e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(R,{className:"h-5 w-5 text-gray-500"})})]})]},l)})})]})}const B=()=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Two-Factor Authentication"}),e.jsx("button",{className:"btn btn-primary bg-blue-500 text-white",children:"Enable 2FA"})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Password Management"}),e.jsx("button",{className:"btn btn-primary bg-blue-500 text-white",children:"Change Password"})]})]})]}),J=[{id:"profile",icon:U,label:"Profile"},{id:"integrations",icon:A,label:"Integrations"},{id:"security",icon:T,label:"Security"}];function z(){const[s,i]=C.useState("profile");return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your account and preferences"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"w-full md:w-64 bg-white rounded-xl shadow-sm p-4",children:J.map(o=>e.jsxs("button",{onClick:()=>i(o.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${s===o.id?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(o.icon,{size:20}),e.jsx("span",{className:"font-medium",children:o.label})]},o.id))}),e.jsxs("div",{className:"flex-1",children:[s==="profile"&&e.jsx($,{}),s==="integrations"&&e.jsx(O,{}),s==="security"&&e.jsx(B,{})]})]})]})}export{z as default};
